<UserControl x:Class="QuacTestSuite.Views.QrngTestView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1100">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Controls -->
        <Border Grid.Row="0" Background="#152232" CornerRadius="12" Padding="24" Margin="0,0,0,24">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Generate:" Foreground="White" VerticalAlignment="Center" FontSize="14" Margin="0,0,12,0"/>
                    <ComboBox x:Name="CmbSize" SelectedIndex="2" Width="140" VerticalAlignment="Center">
                        <ComboBoxItem Content="256 bytes"/>
                        <ComboBoxItem Content="1 KB"/>
                        <ComboBoxItem Content="1 MB"/>
                        <ComboBoxItem Content="10 MB"/>
                        <ComboBoxItem Content="100 MB"/>
                    </ComboBox>
                    
                    <TextBlock Text="Format:" Foreground="White" VerticalAlignment="Center" FontSize="14" Margin="32,0,12,0"/>
                    <ComboBox x:Name="CmbFormat" SelectedIndex="0" Width="120" VerticalAlignment="Center">
                        <ComboBoxItem Content="Hexadecimal"/>
                        <ComboBoxItem Content="Binary"/>
                        <ComboBoxItem Content="Base64"/>
                        <ComboBoxItem Content="Decimal"/>
                    </ComboBox>

                    <CheckBox x:Name="ChkRunTests" Content="Run statistical tests" IsChecked="True" 
                              Foreground="White" VerticalAlignment="Center" Margin="32,0,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="BtnGenerate" Click="Generate_Click" 
                            Background="#00D4AA" Foreground="#0A1628" FontWeight="SemiBold" 
                            Padding="20,12" Height="Auto" MinHeight="48" Cursor="Hand" Margin="0,0,12,0">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Dice6" Width="20" Height="20" VerticalAlignment="Center"/>
                            <TextBlock Text="Generate" Margin="10,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="BtnSave" Click="Save_Click" IsEnabled="False"
                            Background="Transparent" BorderBrush="#00D4AA" BorderThickness="1" 
                            Foreground="#00D4AA" Padding="20,12" Height="Auto" MinHeight="48" Cursor="Hand">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ContentSave" Width="20" Height="20" VerticalAlignment="Center"/>
                            <TextBlock Text="Save to File" Margin="10,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Random Data Output -->
            <Border Grid.Column="0" Background="#152232" CornerRadius="12" Padding="24" Margin="0,0,16,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <Grid Grid.Row="0" Margin="0,0,0,16">
                        <TextBlock Text="Generated Random Data" FontSize="18" FontWeight="SemiBold" Foreground="White"/>
                        <Button x:Name="BtnCopy" Click="Copy_Click" HorizontalAlignment="Right" IsEnabled="False"
                                Background="Transparent" BorderBrush="#5A6C7D" BorderThickness="1"
                                Foreground="#7F8C9A" Padding="12,6" Cursor="Hand">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ContentCopy" Width="14" Height="14" VerticalAlignment="Center"/>
                                <TextBlock Text="Copy" Margin="6,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                    
                    <Border Grid.Row="1" Background="#0A1628" CornerRadius="8" Padding="16">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                            <TextBlock x:Name="RandomDataOutput" 
                                       Text="Click 'Generate' to produce quantum random numbers..." 
                                       Foreground="#7F8C9A" FontFamily="Consolas" FontSize="12" 
                                       TextWrapping="Wrap"/>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </Border>

            <!-- Stats and Tests Panel -->
            <Border Grid.Column="1" Background="#152232" CornerRadius="12" Padding="24" Margin="16,0,0,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="QRNG Statistics" FontSize="18" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,20"/>
                        
                        <!-- Throughput -->
                        <TextBlock Text="THROUGHPUT" Foreground="#5A6C7D" FontSize="11" FontWeight="SemiBold"/>
                        <TextBlock x:Name="ThroughputText" Text="-- MB/s" FontSize="28" FontWeight="Bold" Foreground="#00D4AA" Margin="0,4,0,20"/>
                        
                        <!-- Entropy -->
                        <TextBlock Text="ENTROPY QUALITY" Foreground="#5A6C7D" FontSize="11" FontWeight="SemiBold"/>
                        <TextBlock x:Name="EntropyText" Text="-- bits/byte" FontSize="20" FontWeight="SemiBold" Foreground="White" Margin="0,4,0,20"/>
                        
                        <!-- Total Generated -->
                        <TextBlock Text="BYTES GENERATED" Foreground="#5A6C7D" FontSize="11" FontWeight="SemiBold"/>
                        <TextBlock x:Name="TotalBytesText" Text="0" FontSize="20" FontWeight="SemiBold" Foreground="White" Margin="0,4,0,20"/>
                        
                        <!-- Generation Time -->
                        <TextBlock Text="GENERATION TIME" Foreground="#5A6C7D" FontSize="11" FontWeight="SemiBold"/>
                        <TextBlock x:Name="GenTimeText" Text="--" FontSize="20" FontWeight="SemiBold" Foreground="White" Margin="0,4,0,24"/>

                        <!-- Statistical Tests -->
                        <TextBlock Text="Statistical Tests" FontSize="16" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,16"/>
                        
                        <Border x:Name="TestMonobit" Background="#0A1628" CornerRadius="6" Padding="12" Margin="0,0,0,8">
                            <Grid>
                                <TextBlock Text="Monobit Test" Foreground="White"/>
                                <TextBlock x:Name="MonobitResult" Text="--" HorizontalAlignment="Right" Foreground="#5A6C7D"/>
                            </Grid>
                        </Border>
                        
                        <Border x:Name="TestRuns" Background="#0A1628" CornerRadius="6" Padding="12" Margin="0,0,0,8">
                            <Grid>
                                <TextBlock Text="Runs Test" Foreground="White"/>
                                <TextBlock x:Name="RunsResult" Text="--" HorizontalAlignment="Right" Foreground="#5A6C7D"/>
                            </Grid>
                        </Border>
                        
                        <Border x:Name="TestChiSquare" Background="#0A1628" CornerRadius="6" Padding="12" Margin="0,0,0,8">
                            <Grid>
                                <TextBlock Text="Chi-Square Test" Foreground="White"/>
                                <TextBlock x:Name="ChiSquareResult" Text="--" HorizontalAlignment="Right" Foreground="#5A6C7D"/>
                            </Grid>
                        </Border>
                        
                        <Border x:Name="TestEntropy" Background="#0A1628" CornerRadius="6" Padding="12" Margin="0,0,0,8">
                            <Grid>
                                <TextBlock Text="Entropy Test" Foreground="White"/>
                                <TextBlock x:Name="EntropyTestResult" Text="--" HorizontalAlignment="Right" Foreground="#5A6C7D"/>
                            </Grid>
                        </Border>
                        
                        <Border x:Name="TestNIST" Background="#0A1628" CornerRadius="6" Padding="12">
                            <Grid>
                                <TextBlock Text="NIST SP 800-90B" Foreground="White" FontWeight="SemiBold"/>
                                <TextBlock x:Name="NISTResult" Text="--" HorizontalAlignment="Right" Foreground="#5A6C7D" FontWeight="SemiBold"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- Progress Bar -->
        <Border x:Name="ProgressPanel" Grid.Row="2" Background="#152232" CornerRadius="12" 
                Padding="24" Margin="0,24,0,0" Visibility="Collapsed">
            <StackPanel>
                <TextBlock x:Name="ProgressText" Text="Generating..." Foreground="White" FontWeight="SemiBold" Margin="0,0,0,8"/>
                <ProgressBar x:Name="ProgressBar" IsIndeterminate="True" Height="6" Background="#1A2D42" Foreground="#00D4AA"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
