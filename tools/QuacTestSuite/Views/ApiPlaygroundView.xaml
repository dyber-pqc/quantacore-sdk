<UserControl x:Class="QuacTestSuite.Views.ApiPlaygroundView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1100">

    <UserControl.Resources>
        <Style x:Key="ParamTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#1A2D42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#2A3F54"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>
        <Style x:Key="ParamComboStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#1A2D42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#2A3F54"/>
            <Setter Property="Padding" Value="10,8"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="340"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- API Function List -->
        <Border Grid.Column="0" Background="#152232" CornerRadius="12" Padding="20" Margin="0,0,24,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="SDK Functions" FontSize="18" FontWeight="Bold" 
                           Foreground="White" Margin="0,0,0,16"/>

                <TextBox Grid.Row="1" x:Name="TxtSearch" Margin="0,0,0,16" Background="#0A1628" Foreground="White"
                         BorderBrush="#2A3F54" Padding="12,10" TextChanged="TxtSearch_TextChanged">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Style.Triggers>
                                <Trigger Property="Text" Value="">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <VisualBrush Stretch="None" AlignmentX="Left">
                                                <VisualBrush.Visual>
                                                    <TextBlock Text="Search functions..." Foreground="#5A6C7D" Margin="12,0,0,0"/>
                                                </VisualBrush.Visual>
                                            </VisualBrush>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TextBox.Style>
                </TextBox>

                <TreeView Grid.Row="2" x:Name="FunctionTree" Background="Transparent" BorderThickness="0"
                          Foreground="White" SelectedItemChanged="FunctionTree_Selected">
                    <TreeView.Resources>
                        <Style TargetType="TreeViewItem">
                            <Setter Property="Foreground" Value="#B0B0B0"/>
                            <Setter Property="Padding" Value="4,6"/>
                            <Setter Property="Margin" Value="0,2"/>
                        </Style>
                    </TreeView.Resources>
                    
                    <TreeViewItem Header="Initialization" IsExpanded="True" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_init()" Tag="init"/>
                        <TreeViewItem Header="quac_shutdown()" Tag="shutdown"/>
                        <TreeViewItem Header="quac_is_initialized()" Tag="is_init"/>
                        <TreeViewItem Header="quac_version_string()" Tag="version"/>
                        <TreeViewItem Header="quac_version_info()" Tag="version_info"/>
                    </TreeViewItem>
                    
                    <TreeViewItem Header="Device Management" IsExpanded="False" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_device_count()" Tag="dev_count"/>
                        <TreeViewItem Header="quac_open()" Tag="dev_open"/>
                        <TreeViewItem Header="quac_close()" Tag="dev_close"/>
                        <TreeViewItem Header="quac_get_info()" Tag="dev_info"/>
                        <TreeViewItem Header="quac_get_capabilities()" Tag="dev_caps"/>
                        <TreeViewItem Header="quac_reset()" Tag="dev_reset"/>
                    </TreeViewItem>
                    
                    <TreeViewItem Header="ML-KEM (Kyber)" IsExpanded="True" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_kem_keygen()" Tag="kem_keygen"/>
                        <TreeViewItem Header="quac_kem_encaps()" Tag="kem_encaps"/>
                        <TreeViewItem Header="quac_kem_decaps()" Tag="kem_decaps"/>
                        <TreeViewItem Header="quac_kem_get_params()" Tag="kem_params"/>
                    </TreeViewItem>
                    
                    <TreeViewItem Header="ML-DSA (Dilithium)" IsExpanded="False" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_sign_keygen()" Tag="sign_keygen"/>
                        <TreeViewItem Header="quac_sign()" Tag="sign"/>
                        <TreeViewItem Header="quac_verify()" Tag="verify"/>
                        <TreeViewItem Header="quac_sign_get_params()" Tag="sign_params"/>
                    </TreeViewItem>

                    <TreeViewItem Header="SLH-DSA (SPHINCS+)" IsExpanded="False" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_slh_keygen()" Tag="slh_keygen"/>
                        <TreeViewItem Header="quac_slh_sign()" Tag="slh_sign"/>
                        <TreeViewItem Header="quac_slh_verify()" Tag="slh_verify"/>
                    </TreeViewItem>
                    
                    <TreeViewItem Header="QRNG" IsExpanded="False" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_random_bytes()" Tag="random"/>
                        <TreeViewItem Header="quac_random_seed()" Tag="seed"/>
                        <TreeViewItem Header="quac_random_reseed()" Tag="reseed"/>
                        <TreeViewItem Header="quac_entropy_available()" Tag="entropy"/>
                    </TreeViewItem>

                    <TreeViewItem Header="Key Management" IsExpanded="False" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_key_import()" Tag="key_import"/>
                        <TreeViewItem Header="quac_key_export()" Tag="key_export"/>
                        <TreeViewItem Header="quac_key_delete()" Tag="key_delete"/>
                        <TreeViewItem Header="quac_key_list()" Tag="key_list"/>
                    </TreeViewItem>

                    <TreeViewItem Header="Batch Operations" IsExpanded="False" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_kem_encaps_batch()" Tag="kem_batch"/>
                        <TreeViewItem Header="quac_sign_batch()" Tag="sign_batch"/>
                        <TreeViewItem Header="quac_verify_batch()" Tag="verify_batch"/>
                    </TreeViewItem>
                    
                    <TreeViewItem Header="Diagnostics" IsExpanded="False" Foreground="#00D4AA" FontWeight="Bold">
                        <TreeViewItem Header="quac_self_test()" Tag="self_test"/>
                        <TreeViewItem Header="quac_get_health()" Tag="health"/>
                        <TreeViewItem Header="quac_get_temperature()" Tag="temp"/>
                        <TreeViewItem Header="quac_get_statistics()" Tag="stats"/>
                        <TreeViewItem Header="quac_clear_statistics()" Tag="clear_stats"/>
                    </TreeViewItem>
                </TreeView>
            </Grid>
        </Border>

        <!-- Function Details and Execution -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Function Header -->
            <Border Grid.Row="0" Background="#152232" CornerRadius="12" Padding="24" Margin="0,0,0,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock x:Name="TxtFunctionName" Text="quac_version_string()" FontSize="22" FontWeight="Bold" 
                                   Foreground="#00D4AA" FontFamily="Consolas"/>
                        <TextBlock x:Name="TxtFunctionDesc" Text="Get the SDK version as a human-readable string." 
                                   Foreground="#7F8C9A" FontSize="13" Margin="0,8,0,0" TextWrapping="Wrap"/>
                    </StackPanel>

                    <Button Grid.Column="1" x:Name="BtnExecute" Click="Execute_Click"
                            Background="#00D4AA" Foreground="#0A1628" FontWeight="Bold" 
                            Padding="24,12" Height="Auto" Cursor="Hand">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Play" Width="20" Height="20" VerticalAlignment="Center"/>
                            <TextBlock Text="Execute" Margin="10,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>

            <!-- Parameters Panel -->
            <Border Grid.Row="1" Background="#152232" CornerRadius="12" Padding="24" Margin="0,0,0,16">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="Parameters" FontSize="16" FontWeight="Bold" 
                               Foreground="White" Margin="0,0,0,16"/>

                    <StackPanel Grid.Row="1" x:Name="ParametersPanel">
                        <!-- Algorithm Parameter -->
                        <Border Background="#0A1628" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="algorithm" Foreground="#00B4D8" FontFamily="Consolas" FontSize="13" FontWeight="Bold"/>
                                    <TextBlock Text="quac_algorithm_t" Foreground="#5A6C7D" FontSize="10" FontFamily="Consolas"/>
                                </StackPanel>
                                <ComboBox Grid.Column="1" x:Name="CmbAlgorithm" SelectedIndex="1"
                                          Background="#1A2D42" Foreground="White" BorderBrush="#2A3F54">
                                    <ComboBoxItem Content="QUAC_ALGORITHM_KYBER512" Foreground="White"/>
                                    <ComboBoxItem Content="QUAC_ALGORITHM_KYBER768" Foreground="White"/>
                                    <ComboBoxItem Content="QUAC_ALGORITHM_KYBER1024" Foreground="White"/>
                                </ComboBox>
                            </Grid>
                        </Border>

                        <!-- Device Parameter -->
                        <Border Background="#0A1628" CornerRadius="8" Padding="16" Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="device" Foreground="#00B4D8" FontFamily="Consolas" FontSize="13" FontWeight="Bold"/>
                                    <TextBlock Text="quac_device_t" Foreground="#5A6C7D" FontSize="10" FontFamily="Consolas"/>
                                </StackPanel>
                                <ComboBox Grid.Column="1" x:Name="CmbDevice" SelectedIndex="0"
                                          Background="#1A2D42" Foreground="White" BorderBrush="#2A3F54">
                                    <ComboBoxItem Content="Device 0 (Simulator)" Foreground="White"/>
                                </ComboBox>
                            </Grid>
                        </Border>

                        <!-- Output Buffers Info -->
                        <Border Background="#0A1628" CornerRadius="8" Padding="16">
                            <StackPanel>
                                <TextBlock Text="Output Buffers (auto-allocated)" Foreground="#5A6C7D" FontSize="11" FontWeight="Bold" Margin="0,0,0,12"/>
                                <Grid Margin="0,4">
                                    <TextBlock Text="public_key" Foreground="White" FontFamily="Consolas" FontSize="12"/>
                                    <TextBlock Text="uint8_t[1184]" Foreground="#00D4AA" FontFamily="Consolas" FontSize="12" HorizontalAlignment="Right"/>
                                </Grid>
                                <Grid Margin="0,4">
                                    <TextBlock Text="secret_key" Foreground="White" FontFamily="Consolas" FontSize="12"/>
                                    <TextBlock Text="uint8_t[2400]" Foreground="#00D4AA" FontFamily="Consolas" FontSize="12" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Results Panel -->
            <Border Grid.Row="2" Background="#152232" CornerRadius="12" Padding="24">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0" Margin="0,0,0,16">
                        <TextBlock Text="Result" FontSize="16" FontWeight="Bold" Foreground="White"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Border x:Name="ResultStatus" Background="#2ED573" CornerRadius="4" Padding="12,4" Margin="0,0,12,0">
                                <TextBlock x:Name="TxtResultStatus" Text="QUAC_SUCCESS" Foreground="#0A1628" FontSize="11" FontWeight="Bold"/>
                            </Border>
                            <TextBlock x:Name="TxtExecTime" Text="Execution: 18 ms" Foreground="#5A6C7D" FontSize="12" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <Border Grid.Row="1" Background="#0A1628" CornerRadius="8" Padding="16">
                        <TextBox x:Name="TxtResult" 
                                 Text="// Temperature reading&#x0a;&#x0a;celsius = 46&#x0a;&#x0a;Status: Normal operating range"
                                 Background="Transparent" BorderThickness="0"
                                 Foreground="#00D4AA" FontFamily="Consolas" FontSize="13"
                                 AcceptsReturn="True" TextWrapping="Wrap" IsReadOnly="True"
                                 VerticalScrollBarVisibility="Auto"/>
                    </Border>

                    <!-- Action Buttons -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
                        <Button x:Name="BtnCopyResult" Click="CopyResult_Click"
                                Background="Transparent" BorderBrush="#5A6C7D" BorderThickness="1"
                                Foreground="#7F8C9A" Padding="16,8" Height="Auto" Cursor="Hand" Margin="0,0,12,0">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ContentCopy" Width="16" Height="16" VerticalAlignment="Center"/>
                                <TextBlock Text="Copy" Margin="8,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="BtnSaveResult" Click="SaveResult_Click"
                                Background="Transparent" BorderBrush="#5A6C7D" BorderThickness="1"
                                Foreground="#7F8C9A" Padding="16,8" Height="Auto" Cursor="Hand" Margin="0,0,12,0">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ContentSave" Width="16" Height="16" VerticalAlignment="Center"/>
                                <TextBlock Text="Save" Margin="8,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="BtnClearResult" Click="ClearResult_Click"
                                Background="Transparent" BorderBrush="#FF4757" BorderThickness="1"
                                Foreground="#FF4757" Padding="16,8" Height="Auto" Cursor="Hand">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Delete" Width="16" Height="16" VerticalAlignment="Center"/>
                                <TextBlock Text="Clear" Margin="8,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>
